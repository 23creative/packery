<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <title>Packery</title>

<style>
.container {
  width: 500px;
  margin-bottom: 20px;
  background: #EEE;
}

.item {
  float: left;
  width: 44px;
  height: 44px;
  margin: 3px;
  background: #444;
}

.item.w2 { width:   94px; }
.item.h2 { height:  94px; }
.item.w4 { width:  194px; }
.item.h4 { height: 194px; }

#ex4 {
  width: 50%;
  padding: 10px 20px 30px 40px;
}

#ex5 {
  width: 50%;
}

#ex5 .item {
  margin-left: 1%;
  margin-right: 1%;
  width: 7.9%;
}

#ex5 .item.w2 { width: 17.9%; }
#ex5 .item.w4 { width: 37.9%; }

@media ( max-width: 800px ) {
  body { background: red ;}

  #ex5 .item    { width: 17.9%; }
  #ex5 .item.w2 { width: 37.9%; }
  #ex5 .item.w4 { width: 57.9%; }

}

#ex6 {
  width: 50%;
  padding: 10px 20px 30px 40px;
}

.bogey {
  background: red;
  position: absolute;
}

#ex6 .bogey1 {
  width: 30%;
  height: 140px;
  left: 20%;
  top: 20px;
}

#ex6 .bogey2 {
  width: 140px;
  height: 180px;
  right: 20px;
  top: 140px;
}

</style>

</head>
<body>

  <h1>Packery</h1>

  <div id="ex1" class="container">
    <div class="item w4"></div>
    <div class="item h4"></div>
    <div class="item w2"></div>
    <div class="item h4"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item h2"></div>
    <div class="item w4"></div>
    <div class="item w2"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item w2 h2"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item h4"></div>
    <div class="item"></div>
    <div class="item w4"></div>
    <div class="item"></div>
    <div class="item w2"></div>
    <div class="item"></div>
    <div class="item h2"></div>
    <div class="item"></div>
    <div class="item h2"></div>
  </div>

  <div id="ex2" class="container">
  </div>

  <div id="ex3" class="container">
  </div>

  <div id="ex4" class="container">
    <div class="item w4"></div>
    <div class="item h4"></div>
    <div class="item w2"></div>
    <div class="item h4"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item h2"></div>
    <div class="item w4"></div>
    <div class="item w2"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item w2 h2"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item h4"></div>
    <div class="item"></div>
    <div class="item w4"></div>
    <div class="item"></div>
    <div class="item w2"></div>
    <div class="item"></div>
    <div class="item h2"></div>
    <div class="item"></div>
    <div class="item h2"></div>
  </div>

  <div id="ex5" class="container">
    <div class="item w4"></div>
    <div class="item h4"></div>
    <div class="item w2"></div>
    <div class="item h4"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item h2"></div>
    <div class="item w4"></div>
    <div class="item w2"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item w2 h2"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item h4"></div>
    <div class="item"></div>
    <div class="item w4"></div>
    <div class="item"></div>
    <div class="item w2"></div>
    <div class="item"></div>
    <div class="item h2"></div>
    <div class="item"></div>
    <div class="item h2"></div>
  </div>

  <div id="ex6" class="container">
    <div class="bogey bogey1"></div>
    <div class="bogey bogey2"></div>
  </div>


  <p><button id="add-to-7">Add items</button></p>

  <div id="ex7" class="container">
    <div class="item w2"></div>
    <div class="item h4"></div>
    <div class="item w2"></div>
    <div class="item h4"></div>
    <div class="item"></div>
    <div class="item h2"></div>
    <div class="item w4"></div>
    <div class="item w4"></div>
    <div class="item w4"></div>
  </div>

<script src="components/get-size/get-size.js"></script>
<script src="components/matches-selector-helper/matches-selector.js"></script>
<script src="components/get-style-property/get-style-property.js"></script>
<script src="js/rect.js"></script>
<script src="js/packer.js"></script>
<script src="js/item.js"></script>
<script src="js/packery.js"></script>
<script>

function appendRandomSizedItems( container ) {
  var frag = document.createDocumentFragment();
  for ( var i=0; i < 35; i++ ) {
    var item = document.createElement('div');
    item.className = 'item';
    var w = Math.floor( Math.random() * Math.random() * 180 ) + 20;
    var h = Math.floor( Math.random() * Math.random() * 180 ) + 20;
    item.style.width  = w + 'px';
    item.style.height = h + 'px';
    frag.appendChild( item );
  }

  container.appendChild( frag );
}


window.onload = function() {
  var ex1 = document.getElementById('ex1');
  var packery1 = new Packery( ex1 );

  var ex2 = document.getElementById('ex2');
  appendRandomSizedItems( ex2 );
  var packery2 = new Packery( ex2 );

  var ex3 = document.getElementById('ex3');
  appendRandomSizedItems( ex3 );
  var packery3 = new Packery( ex3, {
    columnWidth: 50,
    rowHeight: 50
  });

  var ex4 = document.getElementById('ex4');
  var packery4 = new Packery( ex4 );

  var ex5 = document.getElementById('ex5');
  var packery5 = new Packery( ex5 );

  var ex6 = document.getElementById('ex6');
  appendRandomSizedItems( ex6 );
  var packery6 = new Packery( ex6, {
    itemSelector: '.item',
    placedElements: ex6.querySelectorAll('.bogey')
  });

  var ex7 = document.getElementById('ex7');
  var packery7 = window.packery7 = new Packery( ex7 );

  var add7Button = document.getElementById('add-to-7');

  add7Button.addEventListener( 'click', function( event ) {
    var fragment = document.createDocumentFragment();
    var items = [];
    for ( var i=0; i < 3; i++ ) {
      var item = document.createElement('div');
      var wRand = Math.random();
      var widthClass = wRand > 0.85 ? 'w4' :
        wRand > 0.7 ? 'w2' : '';
      var hRand = Math.random();
      var heightClass = hRand > 0.85 ? 'h4' :
        hRand > 0.7 ? 'h2' : '';
      item.className = 'item ' + widthClass + ' ' + heightClass;
      fragment.appendChild( item );
      items.push( item )
    }
    ex7.appendChild( fragment );
    packery7.appended( items );
  });

  ex7.addEventListener( 'click', function( event ) {
    var elem = event.target;
    if ( elem.className.indexOf('item') === -1 ) {
      return;
    }

    packery7.remove( elem );
    packery7._init();

  });

};
</script>

</body>
</html>
